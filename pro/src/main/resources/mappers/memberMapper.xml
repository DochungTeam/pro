<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kedu.mapper.MemberMapper">

	<select id="login" resultType="MemberDto">
		select 
			  mid
			, mpw
			, mnm
			, muuid 
		from 
			member 
		where 
			1=1
		and
			mid = #{mid} 
		and 
			mpw = #{mpw}
	</select>
	<select id="confirm" resultType="int">
		select 
			  count(mid)
		from 
			member 
		where 
			1=1
		and
			mid = #{mid} 
		and 
			muuid = #{muuid}
	</select>
	<select id="checkMemberWithSessionKey" resultType="MemberDto">
		select 
			* 
		from 
			member 
		where 
			1=1
		and
			sessionKey = #{value} 
		and 
			sessionlimit > now()
	</select>
	<insert id="memberInsert">
		insert into
		member(
			  mid
			, mpw
			, mnm
			, muuid
			, mgender
			, mmanyn
			, mphone
			, memail
		)
		value(
			  #{mid}
			, #{mpw}
			, #{mnm}
			, #{muuid}
			, #{mgender}
			, 2
			, #{mphone}
			, #{memail}
		)
	</insert>
	<update id="mailConfrim">
		update
			member
		set
			mmanyn = 1
		where
			1=1
		and
			mid = #{mid}
		and
			muuid = #{muuid}
	</update>

</mapper>


